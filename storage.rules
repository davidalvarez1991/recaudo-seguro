rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Permite a los proveedores autenticados subir un logo a su propia carpeta.
    // El ID del proveedor en la ruta debe coincidir con el ID del usuario que realiza la solicitud.
    match /proveedores/{providerId}/logo/{fileName} {
      allow write: if request.auth != null && request.auth.uid == providerId;
    }

    // Permite la lectura pública de cualquier archivo para que puedan ser mostrados en la app.
    // Esto es útil para los logos de empresa, fotos de clientes, etc.
    // Si necesitas más seguridad, puedes restringir la lectura aquí también.
    match /{allPaths=**} {
      allow read;
    }
  }
}
